import { forwardRef } from "react";
// types
import type { ForwardRefRenderFunction } from "react";

// styled components
import {
  StyledPokerActionCta,
  StyledVectorWrapper,
  StyledTooltip,
} from "@/styles/components/poker/poker-player-seat/poker-action-cta.style";

// redux
import { useAppDispatch, useAppSelector } from "@/hooks/redux.hook";
import {
  small_blind,
  min_amount_to_be_betted,
  updateShowPokerSlider,
  triggerActionApi,
} from "@/store/slice/poker/poker.slice";

const PokerActionCta: ForwardRefRenderFunction<
  HTMLDivElement,
  { current_betted_amount: number }
> = ({ current_betted_amount }, raise_cta_ref) => {
  const dispatch = useAppDispatch();
  const _small_blind = useAppSelector(small_blind);
  const _min_amount_to_be_betted = useAppSelector(min_amount_to_be_betted);
  const is_call = (_min_amount_to_be_betted as number) > _small_blind * 2;
  return (
    <>
      <StyledPokerActionCta>
        {/**
         * =============== FOLD =================
         */}
        <StyledVectorWrapper>
          <StyledVectorWrapper
            $cursor="pointer"
            $left="20px"
            $bottom="20px"
            onClick={() => {
              dispatch(
                triggerActionApi({
                  action_type: "fold",
                  current_betted_amount: null,
                })
              );
            }}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="45"
              height="48"
              fill="none"
              viewBox="0 0 45 48"
            >
              <path
                fill="#EF233C"
                d="M10.498 34.349c-.302.962-.196 1.821.32 2.578.52.74 1.633 1.41 3.34 2.007.559.195.97.28 1.234.253.248-.032.387-.042.417-.032-.285.816-.665 1.37-1.14 1.661-.484.271-1.12.27-1.905-.005-1.072-.375-1.954-.98-2.645-1.815-.706-.84-1.13-1.93-1.273-3.267-.137-1.353.106-2.921.73-4.703.126-.363.333-.833.62-1.41.486-1.05.808-1.803.967-2.256.28-.8.427-1.512.44-2.134.12.093.394.282.82.566.41.28.727.636.948 1.07.212.412.278.902.199 1.467-.312.891-.825 1.898-1.54 3.021l4.176 2.528 1.156-3.307 1.55.948-1.157 3.308 7.877 4.814-1.141 3.262-13.993-8.554zM28.376 32.82c-.498 1.074-1.167 1.795-2.008 2.164-.84.369-1.856.277-3.047-.274-1.002-.464-2.007-1.168-3.016-2.11a8.373 8.373 0 01-2.227-3.36c-.476-1.295-.394-2.633.245-4.012.793-1.713 2.2-2.181 4.22-1.404.076-.353.033-.717-.129-1.092a8.1 8.1 0 00-.657-1.15l.323-.697c.602.755 1.058 1.389 1.367 1.902a3.91 3.91 0 01.512 1.692c1.325.72 2.391 1.557 3.2 2.514.816.942 1.332 1.921 1.549 2.938a4.571 4.571 0 01-.332 2.888zm-1.557-1.78c.249-.537.045-1.24-.61-2.107-.657-.869-1.583-1.686-2.78-2.451-.292.288-.7.31-1.222.068-.567-.262-.85-.64-.85-1.134-.478-.186-.835-.254-1.07-.204-.242.029-.427.181-.555.457-.222.479-.085 1.098.41 1.856.48.752 1.15 1.494 2.01 2.227.852.712 1.648 1.24 2.389 1.582.697.323 1.205.461 1.526.416.306-.052.557-.289.752-.71zM32.296 24.954c-.369.674-.879 1.106-1.53 1.297-.658.169-1.415.02-2.271-.449-.351-.192-.777-.497-1.277-.917L17.9 16.863l1.283-3.347 10.047 8.64c.18.171.368.31.565.418.561.307 1 .173 1.314-.403.138-.252.219-.5.242-.743.672.44 1.08.992 1.228 1.657.141.642.047 1.265-.283 1.869z"
              ></path>
              <path
                fill="#EF233C"
                d="M34.49 21.038c-.492.768-1.165 1.239-2.018 1.414-.854.175-1.84-.096-2.957-.813-.997-.64-1.915-1.504-2.756-2.595-.845-1.112-1.394-2.3-1.647-3.566-.258-1.287-.037-2.476.663-3.566.354-.553.712-.903 1.073-1.051.361-.149.697-.123 1.007.075l.08.052-4.011-3.97 1.514-3.25 9.418 9.321c.168.184.346.336.534.457.539.345.985.242 1.34-.31.155-.243.253-.484.293-.724.639.486 1.002 1.06 1.089 1.725.082.642-.062 1.252-.434 1.832-.345.538-.774.91-1.285 1.114-.516.182-1.096.153-1.739-.089.6 1.525.545 2.84-.163 3.944zm-1.117-2.57c.19-.296.253-.675.187-1.135-.057-.474-.267-.932-.63-1.374l-.272-.288-3.99-3.957c-.55-.181-.963-.056-1.24.375-.345.538-.34 1.226.017 2.063.343.829.882 1.65 1.615 2.462.72.804 1.417 1.421 2.09 1.853.673.432 1.165.614 1.474.547.318-.081.568-.263.75-.546z"
              ></path>
            </svg>
          </StyledVectorWrapper>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="95"
            height="109"
            fill="none"
            viewBox="0 0 95 109"
          >
            <mask id="path-1-inside-1_123_99" fill="#fff">
              <path d="M.753 108.753A125 125 0 0163.253.5l31.25 54.126a62.501 62.501 0 00-31.25 54.127H.753z"></path>
            </mask>
            <path
              fill="#000"
              stroke="#F5D547"
              strokeWidth="4"
              d="M.753 108.753A125 125 0 0163.253.5l31.25 54.126a62.501 62.501 0 00-31.25 54.127H.753z"
              mask="url(#path-1-inside-1_123_99)"
              style={{ cursor: "pointer" }}
              onClick={() => {
                console.log("card get folded");
              }}
            ></path>
          </svg>
        </StyledVectorWrapper>

        {/**
         * =============== CHECK =================
         */}
        <StyledVectorWrapper $left="64px" $top="-18px">
          <StyledVectorWrapper
            $cursor="pointer"
            $left={is_call ? "46px" : "35px"}
            $bottom="22px"
            onClick={() => {
              dispatch(
                triggerActionApi({
                  action_type: is_call ? "call" : "check",
                  current_betted_amount: _min_amount_to_be_betted as number,
                })
              );
            }}
          >
            {is_call && (
              <StyledTooltip>
                Call $ $
                {(_min_amount_to_be_betted as number) - current_betted_amount} K
              </StyledTooltip>
            )}
            {is_call ? (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="36"
                height="32"
                fill="none"
                viewBox="0 0 36 32"
              >
                <path
                  fill="#fff"
                  d="M9.123 25.085c-1.798.188-3.167-.127-4.105-.946-.938-.82-1.517-2.279-1.736-4.38-.175-1.67-.084-3.498.272-5.482.371-1.985 1.106-3.727 2.205-5.225C6.87 7.536 8.39 6.678 10.316 6.477c1.193-.125 2.183.037 2.97.486.787.448 1.237 1.214 1.35 2.296.072.684-.007 1.24-.236 1.665-.23.41-.633.646-1.205.705-.573.06-1.048-.1-1.426-.478.272-.173.496-.486.674-.94.178-.452.243-.91.195-1.37-.045-.43-.201-.768-.468-1.014-.251-.247-.631-.344-1.14-.29-.844.087-1.587.752-2.23 1.994-.643 1.225-1.113 2.738-1.407 4.538-.279 1.8-.333 3.51-.164 5.133.127 1.21.43 2.111.91 2.704.48.594 1.262.834 2.344.72a5.586 5.586 0 002.537-.892 6.061 6.061 0 001.868-1.98l.574.18a6.337 6.337 0 01-1.505 2.692 7.991 7.991 0 01-2.351 1.741c-.86.396-1.688.635-2.483.718z"
                ></path>
                <path
                  fill="#fff"
                  d="M15.749 24.308c-.912.01-1.676-.292-2.291-.91-.615-.616-.93-1.588-.946-2.916-.014-1.184.204-2.427.653-3.728.465-1.318 1.156-2.43 2.074-3.337.933-.922 2.048-1.391 3.343-1.406.656-.008 1.146.098 1.468.319.323.22.486.514.49.882l.003.168.249-1.275 3.455-.04-1.633 8.18c-.061.24-.09.497-.087.769.004.32.078.55.224.693.162.126.418.187.77.183.224-.002.4-.037.527-.102-.341.9-.67 1.536-.986 1.908-.316.355-.778.537-1.386.544-.656.007-1.194-.178-1.614-.558-.405-.395-.66-.944-.763-1.647-.96 1.5-2.142 2.257-3.55 2.273zm1.533-2.346c.4-.004.79-.193 1.17-.565.395-.389.66-.912.797-1.57l1.09-5.437c-.003-.208-.085-.407-.248-.597-.162-.206-.411-.307-.747-.303-.64.007-1.212.39-1.715 1.148-.504.742-.893 1.642-1.169 2.702-.276 1.043-.41 1.965-.4 2.764.01.8.127 1.311.354 1.532.242.222.532.33.868.326z"
                ></path>
                <path
                  fill="#fff"
                  d="M26.173 24.451c-.767-.047-1.375-.325-1.824-.834-.433-.523-.619-1.272-.559-2.246.025-.4.121-.915.288-1.545l3.305-11.843 3.575-.26-3.554 12.765a2.696 2.696 0 00-.139.689c-.04.638.268.978.923 1.018.287.018.546-.014.775-.096-.113.795-.439 1.4-.978 1.815-.521.4-1.125.58-1.812.537z"
                ></path>
                <path
                  fill="#fff"
                  d="M29.924 24.746c-.764-.077-1.36-.378-1.79-.904-.412-.54-.57-1.295-.472-2.266.04-.398.156-.91.347-1.533l3.759-11.707 3.582-.122-4.043 12.619c-.088.232-.143.46-.165.683-.064.637.23.988.883 1.053.286.03.546.007.778-.066-.143.79-.492 1.382-1.047 1.776-.537.38-1.147.536-1.832.467z"
                ></path>
              </svg>
            ) : (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="58"
                height="35"
                fill="none"
                viewBox="0 0 58 35"
              >
                <path
                  fill="#fff"
                  d="M9.003 26.56c-1.792.242-3.17-.031-4.132-.82-.963-.79-1.586-2.232-1.87-4.325-.226-1.665-.192-3.494.103-5.487.31-1.996.992-3.76 2.043-5.291 1.066-1.55 2.558-2.454 4.476-2.714 1.19-.162 2.184-.03 2.984.394.8.424 1.274 1.175 1.42 2.253.093.682.03 1.24-.185 1.673-.218.417-.612.664-1.183.741-.57.078-1.05-.067-1.44-.434.267-.182.482-.501.646-.96.163-.458.214-.917.152-1.377-.058-.428-.225-.76-.499-.997-.259-.24-.641-.325-1.149-.256-.84.114-1.562.8-2.166 2.062-.606 1.244-1.029 2.771-1.268 4.58-.223 1.806-.225 3.518-.006 5.135.164 1.205.495 2.097.993 2.675.498.578 1.286.794 2.364.648a5.585 5.585 0 002.509-.97 6.06 6.06 0 001.806-2.038l.58.164a6.337 6.337 0 01-1.422 2.736 7.99 7.99 0 01-2.297 1.813c-.847.422-1.667.686-2.46.794z"
                ></path>
                <path
                  fill="#fff"
                  d="M22.85 25.201c-.848.036-1.474-.193-1.88-.689-.405-.495-.624-1.134-.657-1.917a6.03 6.03 0 01.072-1.132c.061-.435.124-.854.187-1.257.079-.404.132-.663.159-.776.104-.565.2-1.121.29-1.67.088-.548.125-.99.111-1.326-.035-.815-.34-1.21-.915-1.186-.384.016-.728.207-1.033.572-.289.365-.517.84-.684 1.423L17.137 25.3l-3.453.147 2.784-16.453 3.529-.63-1.04 6.073c.762-.913 1.679-1.393 2.75-1.438.815-.035 1.472.162 1.97.589.5.427.768 1.096.807 2.007.02.464-.015.986-.102 1.566a41.699 41.699 0 01-.392 2.083c-.107.5-.206.993-.298 1.478-.076.467-.108.837-.097 1.109.014.32.096.564.248.734.151.17.403.247.754.232.384-.016.646-.075.785-.177-.06.819-.33 1.447-.808 1.884-.462.436-1.037.668-1.724.697z"
                ></path>
                <path
                  fill="#fff"
                  d="M28.427 25.255c-1.167-.045-2.067-.384-2.699-1.017-.631-.649-.922-1.629-.87-2.94.042-1.103.305-2.31.787-3.62a8.372 8.372 0 012.243-3.348c1.013-.938 2.271-1.377 3.774-1.32 1.759.069 2.608.87 2.55 2.405a4.301 4.301 0 01-.864 2.44A5.772 5.772 0 0131.24 19.6a6.696 6.696 0 01-2.74.663c-.045.35-.07.59-.075.718-.051 1.327.419 2.01 1.41 2.047.448.018.932-.084 1.453-.304.52-.22.996-.506 1.426-.857-.523 2.35-1.952 3.479-4.286 3.389zm.285-6.138c.608.008 1.184-.17 1.726-.534a4.227 4.227 0 001.352-1.412c.359-.595.551-1.22.576-1.876.026-.655-.161-.99-.561-1.006-.56-.022-1.14.468-1.738 1.47-.583.986-1.034 2.106-1.355 3.358zM36.414 25.753c-1.162-.126-2.035-.526-2.622-1.201-.585-.691-.807-1.689-.666-2.993.12-1.098.465-2.284 1.038-3.557a8.724 8.724 0 012.469-3.185c1.075-.865 2.353-1.217 3.832-1.057.97.105 1.632.386 1.985.843.353.456.494 1.01.423 1.663-.062.573-.236.988-.521 1.247-.27.26-.58.372-.93.334a1.37 1.37 0 01-.804-.377c.246-.488.393-.947.44-1.377.07-.652-.11-1.001-.539-1.048-.477-.052-.997.294-1.56 1.038-.563.728-1.062 1.623-1.499 2.686-.42 1.05-.672 1.971-.758 2.767-.143 1.32.262 2.032 1.217 2.135.43.047.92-.029 1.473-.226a7.206 7.206 0 001.532-.776c-.684 2.308-2.188 3.336-4.51 3.084zM50.244 27.915c-.974-.19-1.667-.561-2.081-1.114-.411-.57-.532-1.286-.364-2.15.073-.376.2-.776.38-1.197l.367-.882c.115-.255.203-.54.264-.853.147-.754-.063-1.186-.628-1.296a1.832 1.832 0 00-.842.056c-.295.09-.652.248-1.071.476l-2.358 5.58-3.392-.66 6.535-15.354 3.578.207-3.382 7.949 5.244-2.696 2.332.454-5.349 2.357c.248-.017.513.002.796.057.848.166 1.442.55 1.78 1.154.34.604.43 1.306.275 2.107-.064.33-.154.622-.269.877l-.488 1.128a2.907 2.907 0 00-.265.73c-.113.582.137.932.75 1.051.345.067.57.087.673.058a.759.759 0 01.178-.039c-.132.512-.367.923-.704 1.232a2.67 2.67 0 01-1.056.65c-.366.125-.667.164-.903.118z"
                ></path>
              </svg>
            )}
          </StyledVectorWrapper>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="126"
            height="72"
            fill="none"
            viewBox="0 0 126 72"
          >
            <mask id="path-1-inside-1_123_100" fill="#fff">
              <path d="M.253 17.5a125 125 0 01125 0l-31.25 54.127a62.5 62.5 0 00-62.5 0L.253 17.5z"></path>
            </mask>
            <path
              fill="#000"
              stroke="#F5D547"
              strokeWidth="4"
              d="M.253 17.5a125 125 0 01125 0l-31.25 54.127a62.5 62.5 0 00-62.5 0L.253 17.5z"
              mask="url(#path-1-inside-1_123_100)"
              style={{ cursor: "pointer" }}
            ></path>
          </svg>
        </StyledVectorWrapper>

        {/**
         * =============== RAISE =================
         */}
        <StyledVectorWrapper $left="159px">
          <StyledVectorWrapper
            ref={raise_cta_ref}
            $cursor="pointer"
            $left="24px"
            $bottom="22px"
            onClick={() => {
              dispatch(updateShowPokerSlider(true));
            }}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="49"
              height="54"
              fill="none"
              viewBox="0 0 49 54"
            >
              <path
                fill="#90E39A"
                d="M11.717 23.113c-.727-1.014-.655-1.834.217-2.458.286-.205.64-.399 1.06-.582.442-.179 1.012-.4 1.709-.663.742-.256 1.36-.492 1.854-.708.495-.217.91-.446 1.249-.688.884-.634 1.047-1.34.488-2.121a3.45 3.45 0 00-.539-.588l-8.474 3.708-2.012-2.81 14.31-6.235 2.458 2.608-5.192 2.272.112.156c.363.508.874.85 1.533 1.028a4.355 4.355 0 002.02.059c.71-.135 1.32-.384 1.826-.748.599-.428.956-.96 1.073-1.594.138-.63-.049-1.304-.561-2.02-.755-1.053-1.605-1.841-2.55-2.365-.946-.523-1.935-.75-2.967-.68-1.023.084-2.022.475-2.998 1.174-.481.345-.787.632-.916.863-.117.222-.189.342-.215.36-.503-.702-.737-1.331-.703-1.888.057-.552.424-1.07 1.1-1.555.833-.596 1.881-.836 3.146-.718 1.288.12 2.554.542 3.8 1.264 1.257.712 2.269 1.602 3.033 2.669.698.975 1.142 1.897 1.331 2.765.19.869.16 1.638-.089 2.308a3.253 3.253 0 01-1.192 1.592c-.61.438-1.357.687-2.239.748a5.522 5.522 0 01-2.606-.466c.21.597.217 1.114.018 1.552-.176.44-.51.838-1.005 1.192a7.19 7.19 0 01-1.308.73c-.481.207-1.095.45-1.84.728-.478.185-.944.371-1.4.56-.455.188-.813.376-1.073.562-.3.214-.52.47-.66.768-.132.311-.16.616-.083.915-.79-.635-1.361-1.2-1.715-1.694z"
              ></path>
              <path
                fill="#90E39A"
                d="M14.438 26.918c-.45-.793-.553-1.608-.31-2.445.244-.836.944-1.582 2.1-2.236 1.03-.583 2.223-.992 3.58-1.227 1.378-.229 2.685-.16 3.922.206 1.26.372 2.208 1.122 2.846 2.25.323.57.466 1.05.43 1.44-.038.388-.217.673-.537.855l-.146.082 1.237-.397 1.702 3.008-7.952 2.516c-.24.063-.479.161-.716.295-.278.158-.445.335-.499.531-.032.202.038.457.211.763.11.195.225.332.344.412-.953.135-1.668.154-2.146.057-.464-.105-.846-.422-1.146-.951-.323-.571-.42-1.132-.29-1.683.15-.545.508-1.033 1.074-1.463-1.776-.117-3.01-.788-3.704-2.013zm2.794.21c.197.349.55.6 1.06.752.531.16 1.118.14 1.76-.058l5.287-1.67c.181-.103.316-.27.404-.505.102-.241.07-.508-.095-.8-.316-.558-.926-.874-1.833-.949-.893-.083-1.87.01-2.93.28-1.047.262-1.919.59-2.615.984-.696.394-1.087.744-1.171 1.05-.077.319-.032.624.133.917z"
              ></path>
              <path
                fill="#90E39A"
                d="M32.051 31.606a1.83 1.83 0 01-.074-1.451 1.83 1.83 0 01.98-1.073 1.83 1.83 0 011.45-.075c.505.169.87.492 1.095.97.225.477.243.964.053 1.46-.169.505-.492.87-.97 1.095a1.792 1.792 0 01-1.46.054 1.83 1.83 0 01-1.074-.98zm-12.85 4.262c-.328-.694-.377-1.36-.148-2 .236-.624.788-1.142 1.656-1.551.362-.171.86-.335 1.493-.493l7.663-1.813 1.476 3.125-8.117 1.921c-.244.045-.49.125-.736.241-.289.137-.468.301-.537.493-.047.2.004.458.155.776.123.26.275.472.458.633-.751.284-1.431.286-2.04.008-.588-.271-1.029-.718-1.323-1.34z"
              ></path>
              <path
                fill="#90E39A"
                d="M21.102 40.118c-.288-.712-.398-1.366-.33-1.964.084-.603.292-1.11.626-1.522.349-.418.76-.723 1.235-.915.489-.199.96-.251 1.412-.158.46.072.839.238 1.134.498 1.272.157 2.522.238 3.75.24a49.879 49.879 0 003.943-.174l1.78 3.112c-1.869.843-3.871 1.802-6.009 2.876-.86.434-1.49.733-1.89.896-.904.366-1.738.437-2.503.212a4.167 4.167 0 01-1.94-1.208 6.199 6.199 0 01-1.208-1.893zm1.469-1.424c.222.549.572.942 1.048 1.18.477.24 1.078.211 1.805-.084.445-.18 1.05-.477 1.814-.89 1.63-.834 2.725-1.39 3.286-1.67-1.316.12-2.96.087-4.934-.096-.04.413-.23.688-.571.827-.282.114-.573.12-.874.017a.91.91 0 01-.613-.554c-.126-.312-.111-.55.046-.718-.534.217-.885.48-1.053.79-.162.324-.147.724.046 1.198z"
              ></path>
              <path
                fill="#90E39A"
                d="M23.503 46.455c-.365-1.11-.36-2.071.012-2.884.388-.818 1.205-1.432 2.452-1.842 1.049-.345 2.271-.52 3.668-.523a8.371 8.371 0 013.92.934c1.231.623 2.082 1.648 2.552 3.077.55 1.672.095 2.748-1.364 3.227a4.3 4.3 0 01-2.589.043 5.772 5.772 0 01-2.37-1.369 6.693 6.693 0 01-1.576-2.336c-.344.08-.577.139-.699.179-1.262.415-1.737 1.093-1.428 2.036.14.425.404.844.792 1.255a5.81 5.81 0 001.301 1.038c-2.384.329-3.941-.616-4.67-2.835zm5.852-1.873c.205.572.572 1.05 1.102 1.431a4.228 4.228 0 001.795.774 3.87 3.87 0 001.96-.113c.622-.205.871-.498.746-.877-.174-.532-.836-.905-1.983-1.117-1.128-.202-2.334-.235-3.62-.098z"
              ></path>
            </svg>
          </StyledVectorWrapper>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="94"
            height="109"
            fill="none"
            viewBox="0 0 94 109"
          >
            <mask id="path-1-inside-1_123_102" fill="#fff">
              <path d="M31.253.5a125 125 0 0162.5 108.253h-62.5A62.499 62.499 0 00.003 54.627L31.253.5z"></path>
            </mask>
            <path
              fill="#000"
              stroke="#F5D547"
              strokeWidth="4"
              d="M31.253.5a125 125 0 0162.5 108.253h-62.5A62.499 62.499 0 00.003 54.627L31.253.5z"
              mask="url(#path-1-inside-1_123_102)"
            ></path>
          </svg>
        </StyledVectorWrapper>
      </StyledPokerActionCta>
    </>
  );
};
export default forwardRef(PokerActionCta);
